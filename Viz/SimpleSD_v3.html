<!DOCTYPE html>
<html>
  <head>

<style type='text/css'>
  .highlight {
    font-weight: bold;
    color: green;
    background-color: orange;
    text-align: right;
  }

  .headerRowStyle {
    font-weight: bold;
    color: black;
    background-color: white;
    text-align: center;
  }


  .bold-font {
    font-weight: bold;
  }

</style>


    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["table", "controls", "corechart"]});
      google.setOnLoadCallback(drawTable);
      function drawTable() {

/*        if (yStep1) {window.alert("Step 1")};
        if (yStep2) {window.alert("Step 2")};
        if (yStep3) {window.alert("Step 3")};*/

        var query = new google.visualization.Query("https://docs.google.com/spreadsheets/d/1nOTJt9PDH-T08J_Z4pFW1DVvsNnJnak_91j0Lf6qzCw/edit?usp=sharing");
        query.send(handleQueryResponse);
      }

      var dataRows=21;

      function handleQueryResponse(response) {

        var data = response.getDataTable();
        data.setCell(0, 0, undefined, undefined, {style: 'width:110px'});
        
        var yStep1 = document.getElementById("Step1").checked;
        var yStep2 = document.getElementById("Step2").checked;
        var yStep3 = document.getElementById("Step3").checked;
        var yStep4 = document.getElementById("Step4").checked;
        var yStep5 = document.getElementById("Step5").checked;

        // Table 1 //
        var table1View = new google.visualization.DataView(data);
          table1View.setColumns([0,4,5,6]);
          table1View.setRows(0,dataRows+1);

        var table1Options = {
        allowHtml: true, showRowNumber: false, sort: 'disable', height: '150px', 'cssClassNames': cssClassNames
            };


        // Table 2 //
        var table2View = new google.visualization.DataView(data);
          table2View.setColumns([0,4,5,6]);
          table2View.setRows(dataRows,dataRows+4);

        // Scatter //
        var scatterView = new google.visualization.DataView(data);
          scatterView.setColumns([8,4]);
          scatterView.setRows(0,dataRows-1);

        var scatterOptions = {
          title: 'Distribution of Income on Vertical Axis',
          vAxis: {title: 'Income ($1000s)', ticks: [5,10,15,20, 25, 30] },
          legend: 'none',
          chartArea: {height: '400px'},
          hAxis: {textPosition: 'none', ticks: null, title: null, minValue: -49, maxValue: 75, format: null},
          colors: ['blue', 'orange']
        };


          document.getElementById('eqContent').innerHTML = '<br>SD = SQRT( SUMMATION( (income-mean(income))^2 ) / (n-1) )';

          var cssClassNames = {
    'headerRow': 'headerRowStyle'};


        if (yStep1) {
          data.setCell(dataRows+2,4, undefined, undefined, {'className': 'highlight'});
          document.getElementById('eqContent').innerHTML = '<br>SD = SQRT( SUMMATION( (income-<strong>mean(income)</strong>)^2 ) / (n-1) )';
          scatterView.setColumns([8,4, 9]);
        };
        if (yStep2) {
          for (i = 0; i < dataRows; i++) {
          data.setCell(i,5, undefined, undefined, {'className': 'highlight'});
          }

          document.getElementById('eqContent').innerHTML = '<br>SD = SQRT( SUMMATION( <strong>(income-mean(income))</strong>^2 ) / (n-1) )';
        };
        if (yStep3) {
          for (i = 0; i < dataRows; i++) {
          data.setCell(i,6, undefined, undefined, {'className': 'highlight'});
          }
          document.getElementById('eqContent').innerHTML = '<br>SD = SQRT( <strong>SUMMATION( (income-mean(income))^2 )</strong> / (n-1) )';        
        };
        if (yStep4) {
          data.setCell(dataRows+3,6, undefined, undefined, {'className': 'highlight'});
          document.getElementById('eqContent').innerHTML = '<br>SD = SQRT( <strong>SUMMATION( (income-mean(income))^2 ) / (n-1)</strong> )';   
        };
        if (yStep5) {
          data.setCell(dataRows+4,6, undefined, undefined, {'className': 'highlight'});
          document.getElementById('eqContent').innerHTML = '<br>SD = <strong>SQRT( SUMMATION( (income-mean(income))^2 ) / (n-1) )</strong>';   
        };        

        var table1 = new google.visualization.Table(document.getElementById('table1_div'));
        table1.draw(table1View, table1Options);

        var table2 = new google.visualization.Table(document.getElementById('table2_div'));
        table2.draw(table2View, table1Options);

        var scatter = new google.visualization.ScatterChart(document.getElementById('scatter_div'));
        scatter.draw(scatterView, scatterOptions)


        
      }
    </script>
  </head>
  <body>

    <div id="topDiv" style="width: 780px; overflow: hidden;">
    <h1 align="center">Standard Deviation</h1>
        <p><strong>Memory Tool:</strong> "A <strong>standard deviation</strong> is the square root of the variance."</p>

      <div id="filter_div" style="width: 400px; float: left;">
        <h1>Steps</h1>
        <form>
        <input type="radio" id="Step1" name="Step" value="2" onClick="drawTable()">Step 1: Mean of y.<br>
        <input type="radio" id="Step2" name="Step" value="3" onClick="drawTable()">Step 2: Deviations-from-means.<br> 
        <input type="radio" id="Step3" name="Step" value="4" onClick="drawTable()">Step 3: Squared deviations-from-means.<br> 
        <input type="radio" id="Step4" name="Step" value="5" onClick="drawTable()">Step 4: Variance (based on a sample).<br>   
        <input type="radio" id="Step5" name="Step" value="6" onClick="drawTable()">Step 5: Standard deviation (based on a sample).<br><br>   
        </form>
        </div>

      <div id="equation_div" style="margin-left: 420px; width: 340px">
        <h1>Equation</h1> 
        <div id="eqContent">here</div>
      </div>

    </div>

    </div id="bottomHalf" style="width: 100%; overflow: hidden;">

      <div id="bottomLeft" style="width: 400px; float: left;"> 
        <h1>Example with Data</h1>
        <div id="table1_div"></div>
        <div id="table2_div"></div>
      </div> 

      <div style="margin-left: 420px; width: 340px; height: 260px">
        <div id="scatter_div" style="height: 250px"></div>
      </div>

    </div>    

  </body>
</html>
